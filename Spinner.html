<head>
    <script src="./p5.min.js"></script>
    <script src="./p5.sound.min.js"></script>
    <script language="javascript">
        var img;
        var velocity = 0;
        var friction = 0.995;
        var maxVelocity = 0.08;
        var minVelocity = 0.002;
        var currentRotation = 0;
        var soundFiles = {}

        var A;
        var B;
        var C;
        var D;
        var E;
        var G;
        var LowF;
        var LowG;

        var noteOrder;

        var lastNote = 0;
        var noteFrequency;

        function setup() {
            createCanvas(window.innerWidth, window.innerHeight);
            imageMode(CENTER);
            img = loadImage("http://i.imgur.com/gHNorlB.png");
            fill(0);
            stroke(0);

            A = loadSound('Notes/A.wav');
            B = loadSound('Notes/B.wav');
            C = loadSound('Notes/C.wav');
            D = loadSound('Notes/D.wav');
            E = loadSound('Notes/E.wav');
            G = loadSound('Notes/G.wav');
            LowF = loadSound('Notes/LowF.wav')
            LowG = loadSound('Notes/LowG.wav');

            noteOrder = [A, A, C, A, D, A, E, D, C, C, E, C, G, C, E, C, LowG, LowG, B, LowG, C, LowG, D, C, LowF, LowF, A, LowF, C, LowF, C, B];

            noteFrequency = PI / 16;
        }

        function draw() {
            var size;
            if (width > height)
            {
                size = height * 3 / 4;
            }
            else
            {
                size = width * 3 / 4;
            }

            velocity *= friction;

            if (velocity > maxVelocity) {
                velocity = maxVelocity;
            }
            if (velocity < minVelocity) {
                velocity = 0;
            }

            currentRotation += velocity;

            var currentNote = Math.floor(currentRotation / noteFrequency);
            if (currentNote != lastNote)
            {
                lastNote = currentNote;
                noteOrder[currentNote % noteOrder.length].play();
            }

            translate(width / 2, height / 2);
            rotate(currentRotation);
            image(img, 0, 0, size, size);
            rotate(-currentRotation);
            triangle(-20, -(size / 2) - 50, 20, -(size / 2) - 50, 0, -(size / 2));
        }

        function mouseClicked() {
            velocity += 0.02 + random(100) / 5000;
        }
    </script>
    <style>
        body {
            padding: 0;
            margin: 0;
        }
    </style>
</head>

<body>
</body>