{"version":3,"sources":["animationManager.ts"],"names":[],"mappings":";;;IASA,cAAc,IAAY;QACxB,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC;QACnB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACV,kBAAA,IAAI,GAAG,IAAI,CAAA,CAAC;QACd,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,GAAG,IAAI,GAAG,OAAO,CAAC,CAAC,CAAC;YAC1B,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBACZ,IAAI,UAAU,GAAG,CAAC,CAAC;gBACnB,OAAO,IAAI,GAAG,IAAI,GAAG,OAAO,EAAE,CAAC;oBAC7B,EAAE,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC,CAAC;wBACnB,kBAAA,IAAI,GAAG,IAAI,CAAA,CAAC;oBACd,CAAC;oBACD,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;oBACrB,kBAAA,IAAI,IAAI,OAAO,CAAA,CAAA;oBACf,UAAU,EAAE,CAAC;gBACf,CAAC;gBACD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACrB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,kBAAA,IAAI,GAAG,IAAI,CAAA,CAAC;YACd,CAAC;QACH,CAAC;QACD,qBAAqB,CAAC,IAAI,CAAC,CAAC;IAC9B,CAAC;IAED;QACE,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,qBAAqB,CAAC,IAAI,CAAC,CAAC;IAC9B,CAAC;;;;;;;;;;YAlCD,kBAAW,IAAI,GAAW,IAAI,EAAC;YAC/B,qBAAW,OAAO,GAAG,IAAI,EAAC;YAC1B,oBAAW,MAAM,GAAG,IAAI,4BAAa,EAAU,EAAC;YAChD,kBAAW,IAAI,GAAG,IAAI,4BAAa,EAAU,EAAC;YAC9C,kBAAW,IAAI,GAAG,IAAI,4BAAa,EAAE,EAAC;QA+BtC,CAAC","file":"animationManager.js","sourcesContent":["import {EventManager0, EventManager1} from \"./eventManager\";\r\nimport ces from \"./ces\";\r\n\r\nexport let Time: number = null;\r\nexport let Running = true;\r\nexport let Update = new EventManager1<number>();\r\nexport let Draw = new EventManager1<number>();\r\nexport let Init = new EventManager0();\r\n\r\nfunction loop(time: number) {\r\n  time = time / 1000;\r\n  if (!Time) {\r\n    Time = time;\r\n  }\r\n\r\n  if (time - Time > 0.01667) {\r\n    if (Running) {\r\n      let iterations = 0;\r\n      while (time - Time > 0.01667) {\r\n        if (iterations > 2) {\r\n          Time = time;\r\n        }\r\n        Update.Publish(Time);\r\n        Time += 0.01667\r\n        iterations++;\r\n      }\r\n      Draw.Publish(Time);\r\n    } else {\r\n      Time = time;\r\n    }\r\n  }\r\n  requestAnimationFrame(loop);\r\n}\r\n\r\nexport function Setup() {\r\n  Init.Publish();\r\n  requestAnimationFrame(loop);\r\n}\r\n"]}