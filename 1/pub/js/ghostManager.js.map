{"version":3,"sources":["ghostManager.ts"],"names":[],"mappings":";;;;;;;;;;;;;;iCAGe;gBACX,gBAAM,CAAC,SAAS,CAAC,kBAAkB,EAAE,CAAC,MAAW;oBAC7C,IAAI,MAAM,GAAG,aAAG,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC1C,IAAI,EAAE,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;oBAC/C,IAAI,EAAE,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;oBAC/C,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC;oBAC/D,EAAE,GAAG,EAAE,GAAG,MAAM,CAAC;oBACjB,EAAE,GAAG,EAAE,GAAG,MAAM,CAAC;oBACjB,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,EAAE,CAAC;oBACxB,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,EAAE,CAAC;oBAExB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,MAAM,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC;wBAC3C,aAAG,CAAC,SAAS,CAAC;4BACV,QAAQ,EAAE,MAAM,CAAC,QAAQ;4BACzB,UAAU,EAAE;gCACR,KAAK,EAAE,CAAC;gCACR,MAAM,EAAE,CAAC;6BACZ;4BACD,QAAQ,EAAE;gCACN,OAAO,EAAE,UAAU;6BACtB;4BACD,UAAU,EAAE,IAAI;4BAChB,MAAM,EAAE,IAAI;yBACf,CAAC,CAAC;oBACP,CAAC;gBACL,CAAC,CAAC,CAAC;YACP,CAAC;QACD,CAAC","file":"ghostManager.js","sourcesContent":["import events from \"./events\";\r\nimport ces from \"./ces\";\r\n\r\nexport default () => {\r\n    events.Subscribe(\"ces.update.ghost\", (entity: any) => {\r\n        var player = ces.GetEntities(\"player\")[0];\r\n        var dx = player.position.x - entity.position.x;\r\n        var dy = player.position.y - entity.position.y;\r\n        var length = Math.sqrt(dx * dx + dy * dy) / entity.ghost.speed;\r\n        dx = dx / length;\r\n        dy = dy / length;\r\n        entity.position.x += dx;\r\n        entity.position.y += dy;\r\n\r\n        if (Math.random() < entity.ghost.shootChance) {\r\n            ces.AddEntity({\r\n                position: entity.position,\r\n                dimensions: {\r\n                    width: 5,\r\n                    height: 5\r\n                },\r\n                rendered: {\r\n                    texture: \"Wall.png\"\r\n                },\r\n                collidable: true,\r\n                bullet: true\r\n            });\r\n        }\r\n    });\r\n};\r\n"]}